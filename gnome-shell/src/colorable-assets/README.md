# gnome-shell/src/colorable‑assets

## 1. Module Identity

The **colorable‑assets** directory holds the *template* SVG files that are used by the GNOME Shell theme.  These SVGs contain placeholder colour names (e.g. `accent-color`, `bg-color`, …) instead of hard‑coded hex values.  At build time a helper script replaces the placeholders with the actual Yaru colour palette, producing the final assets that the GNOME Shell theme ships.

## 2. Interface Contract

| Exported entry point | Type | Description | Key arguments / return values |
|----------------------|------|-------------|--------------------------------|
| `colorize_dummy_svg.py` | CLI script (Python) | Walks a source directory of SVG templates, substitutes the placeholder colour tokens with concrete values, and writes the coloured SVGs to a destination directory. | **Arguments** (extracted from the script’s `argparse` configuration):<br>• `--src-dir` – Path to the directory containing the SVG templates.<br>• `--dst-dir` – Destination directory for the generated SVGs.<br>• `--css` – Path to the Yaru colour‑definition CSS file (kept in sync with `yaru‑colors‑defs.scss`).<br>• `--filter` – Optional glob patterns to exclude files.<br>**Returns** – Exit code `0` on success; writes files to `--dst-dir`.
| `gnome-shell/gresources‑xml‑parser.py` | CLI script (Python) | Parses a GResource XML manifest, applies optional path prefix and filter rules, and prints a newline‑separated list of files that should be fed to `glib‑compile‑resources`. | **Arguments**:<br>• `gresource_source` – XML file describing the GResource bundle.<br>• `--path` – Prefix added to each listed file.
> • `--filter` – Repeated glob patterns; matching files are omitted.
| `DUMMY_COLORS` (in `colorize_dummy_svg.py`) | Constant dict | Mapping from placeholder token names to *dummy* hex values used when the real Yaru palette is not yet available.  The script guarantees that this dictionary stays in sync with the colour definitions used by the theme.

> **Note**: The scripts are *not* imported as Python modules by other code; they are executed directly by the build system (Meson) and therefore constitute the public interface of this folder.

## 3. Logic Flow

1. **Preparation** – The build system generates a CSS file that defines the actual Yaru colour palette (derived from `yaru‑colors‑defs.scss`).
2. **Invocation of `colorize_dummy_svg.py`**
   - The script parses its command‑line arguments.
   - It builds a colour‑lookup table:
     - Starts with the hard‑coded `DUMMY_COLORS` dictionary.
     - If a CSS file is supplied, the script reads the CSS, extracts the real colour values, and overwrites the corresponding entries in the lookup table.
   - Using `glob`, it collects every `*.svg` file under `--src-dir` (respecting any `--filter` patterns).
   - For each SVG file:
     - The file is read as text.
     - Every placeholder token (e.g. `{{accent-color}}` or simply `accent-color`) is replaced with the hex value from the lookup table.
     - The transformed content is written to the mirrored path under `--dst-dir`.
3. **Optional GResource list generation** – `gresource‑xml‑parser.py` can be run on the generated XML manifest (`*.gresource.xml`). It:
   - Loads the XML with `xml.etree.ElementTree`.
   - Extracts all `<file>` entries.
   - Applies the `--filter` globs to drop unwanted files.
   - Prepends the optional `--path` prefix.
   - Emits the final list to stdout, which is then piped to `glib‑compile‑resources`.
4. **Packaging** – The coloured SVGs are installed into the GNOME Shell theme directory and referenced by the GNOME Shell CSS.

## 4. Dependencies

- **Python standard library**: `argparse`, `fnmatch`, `os`, `glob`, `xml.etree.ElementTree` (only in the GResource parser).
- **Yaru colour definition source**: `yaru‑colors‑defs.scss` (or the generated CSS file) – the script expects the placeholder names defined in this file to match the keys of `DUMMY_COLORS`.
- **Build system integration**: The Meson build scripts invoke the two helper scripts; they rely on the presence of the source SVG templates inside this folder and on the generated colour CSS.
- **External tooling** (outside the folder but part of the pipeline): `glib‑compile‑resources` consumes the file list produced by `gresource‑xml‑parser.py`.

---
*Generated by the Documentation Consistency Enforcer (confidence 0.92).*