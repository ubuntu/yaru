# Yaru Default Theme – GTK 3.0 (`gtk/src/default/gtk-3.0`)

## 1. Module Identity
This directory holds the **default Yaru theme implementation for GTK 3.0**.  The visual style is authored in **SASS/SCSS** and is transformed into the CSS that GTK 3.0 loads at runtime.  The resulting CSS is packaged as a **GResource** so that the theme can be consumed without needing the source files on the target system.

---

## 2. Interface Contract
The folder does not expose a programming API; instead it provides **theme assets** that GTK 3.0 expects to find in the standard theme lookup path.  The key artefacts produced by the build process are:

| Asset | Description | How it is consumed |
|-------|-------------|--------------------|
| `yaru.css` (generated) | The compiled CSS containing all widget style rules. | Loaded by GTK 3.0 when the *Yaru* theme is selected. |
| `yaru.gresource` (generated) | Binary GResource bundle that embeds `yaru.css` and any auxiliary files (e.g., images, SVGs). | GTK 3.0 reads the GResource at runtime via `g_resource_load`. |
| SCSS source files (`_common.scss`, `_colors.scss`, …) | Human‑editable source that defines colours, mixins and widget selectors. | Used only at build time; never shipped to end users. |

> **Note**: No public functions, classes or network endpoints are exported from this directory.  The “interface” is the set of files that the GTK 3.0 theme engine reads.

---

## 3. Logic Flow
The transformation pipeline is entirely driven by **Meson** and the helper script `parse‑sass.sh` (present in the repository root).  The flow can be summarised as follows:

1. **Developer edits SCSS** – Most changes happen in `_common.scss`; colour tweaks live in `_colors.scss` or `_colors‑public.scss`.
2. **Meson detects `sassc`** – During configuration Meson checks for the `sassc` binary.  If it is available, the SCSS files are compiled automatically; otherwise the build falls back to the pre‑generated CSS.
3. **`parse‑sass.sh` (or direct `sassc` call)** – The script invokes `sassc` with the appropriate include paths and outputs `yaru.css`.
4. **GResource compilation** – Meson runs `glib-compile-resources` on `yaru.gresource.xml`, embedding the freshly generated `yaru.css` (and any image assets) into `yaru.gresource`.
5. **Installation** – Both `yaru.css` (as a fallback) and `yaru.gresource` are installed into `$datadir/themes/Yaru/gtk-3.0/` where GTK 3.0 can locate them.

The **runtime** path is therefore:
```
$XDG_DATA_DIRS/yaru/gtk-3.0/yaru.gresource   ← loaded by GTK
```
If the GResource cannot be found, GTK falls back to the plain CSS file.

---

## 4. Dependencies
| Dependency | Reason for inclusion |
|------------|----------------------|
| **Meson** | Build system that orchestrates SCSS compilation and GResource generation. |
| **sassc** (optional but recommended) | Compiles SCSS → CSS.  If missing, Meson uses the CSS committed in the repository. |
| **glib‑2.0** (glib‑compile‑resources) | Packs the CSS and ancillary assets into a GResource binary. |
| **GTK 3.0** runtime | Consumes the generated theme files. |
| **SCSS source files** (`_common.scss`, `_colors.scss`, `_colors‑public.scss`, `_drawing.scss`) | Provide the actual style definitions; they are part of this module. |
| **`parse‑sass.sh`** (repository‑level script) | Convenience wrapper around `sassc`; invoked by Meson when `sassc` is present. |

No other Yaru sub‑modules are required at build time, but the **GTK 2.0** theme files (`gtk-2.0/*.rc`) share colour definitions and can be consulted for visual consistency.

---

## 5. Updating the Theme
1. **Edit the appropriate SCSS file** (usually `_common.scss`).
2. Run `meson setup builddir && meson compile -C builddir` **or** execute `./parse‑sass.sh` manually to generate fresh CSS.
3. Verify the visual result by launching a GTK 3.0 application with the *Yaru* theme selected.
4. Commit **both** the modified SCSS **and** the newly generated `yaru.css` (or the updated GResource if you prefer to commit the binary).  This ensures downstream builds that lack `sassc` still obtain the correct appearance.

---

*Generated by the Documentation Consistency Enforcer – confidence: 0.92*