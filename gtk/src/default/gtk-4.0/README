# Yaru Default Theme – GTK 4.0

## Module Identity
This directory holds the **default Yaru theme** for **GTK 4.0**.  It contains the source SCSS files that describe the visual style of every widget, the generated CSS files that GTK loads at runtime, and the compiled GResource bundle that ships with the package.  The theme is the entry point for all Yaru‑based applications that use GTK 4.0.

---

## Interface Contract
| Artifact | Description | Exported To |
|----------|-------------|-------------|
| `scss/_colors.scss` | Core colour palette (light & dark) used by all other SCSS files. | Internal – imported by other SCSS files. |
| `scss/_colors-public.scss` | Sub‑set of colours that are exposed through GTK’s CSS‑variables for third‑party apps. | Public – available to applications via the `@define-color` mechanism. |
| `scss/_drawing.scss` | Mixins & helper functions that simplify drawing of complex widget elements. | Internal – used by `_common.scss`. |
| `scss/_common.scss` | **Main stylesheet** – contains widget‑specific selectors and style rules. | Public – compiled into the final CSS files. |
| `Default‑<variant>.css` (e.g. `Default-light.css`) | CSS produced by `sassc` from the SCSS sources for each variant (light, dark, hc, hc‑dark). | Runtime – loaded by GTK 4.0 via the GResource bundle. |
| `gtk‑<variant>.css` | Thin wrapper files generated by Meson that simply `@import` the corresponding `Default‑<variant>.css`. | Runtime – referenced by GTK’s theme lookup. |
| `yaru.gresource` | Binary GResource containing all compiled CSS files and related assets (icons, pixmaps, etc.). | Runtime – GTK loads this bundle at start‑up. |

> **Note**: The directory does **not** expose any Python or C APIs; its public contract is the set of generated CSS/GResource files that GTK consumes.

---

## Logic Flow
1. **Developer edits SCSS** – Most customisations happen in `scss/_common.scss`.  The other SCSS files provide colour definitions and helper mixins.
2. **Meson build step** – When `meson` is invoked, it runs `sassc` on each `_*.scss` file to produce the four variant CSS files (`Default‑light.css`, `Default‑dark.css`, `Default‑hc.css`, `Default‑hc-dark.css`).
3. **Wrapper generation** – Meson creates thin wrapper files (`gtk‑light.css`, …) that simply `@import` the corresponding `Default‑*.css`.  This extra level is required by GTK’s theme‑lookup algorithm.
4. **GResource compilation** – `glib-compile-resources` packs the wrapper CSS files (and any ancillary assets) into `yaru.gresource` according to the `yaru.gresource.xml` manifest.
5. **Installation** – The compiled GResource is installed under `/usr/share/themes/Yaru/gtk-4.0/` and is automatically selected by GTK when the user chooses the Yaru theme.
6. **Runtime consumption** – At application start‑up GTK loads `yaru.gresource`, extracts the appropriate `gtk‑<variant>.css`, and applies the style rules to every widget.

---

## Dependencies
- **Build‑time**: `meson`, `sassc` (or any compatible Sass compiler), `glib-compile-resources`.
- **Runtime**: GTK 4.0 core libraries, the GResource system provided by GLib.
- **Internal project modules**: The SCSS files rely on colour definitions from `scss/_colors.scss` and mixins from `scss/_drawing.scss`.  No direct code imports from other Yaru sub‑modules are required, but the theme assumes the presence of the standard GTK 4.0 widget set.

---

## Maintenance Tips
- **Changing a widget style** – Edit `scss/_common.scss` and run `meson compile` (or simply rebuild the package).  The CSS and GResource will be regenerated automatically.
- **Adding a new colour** – Define it in `_colors.scss` and, if it should be public, also expose it in `_colors-public.scss`.
- **Debugging** – The generated CSS files are located in the build directory (`<builddir>/gtk/src/default/gtk-4.0/`).  You can inspect them directly to verify that your SCSS changes were applied.

---

*Generated by the Documentation Consistency Enforcer (confidence: high for structural description, medium for variant‑specific filenames).*
